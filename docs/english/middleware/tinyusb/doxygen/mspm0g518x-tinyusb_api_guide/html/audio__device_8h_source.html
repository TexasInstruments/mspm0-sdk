<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<title>MSPM0G518xTinyUSBLibrary: audio_device.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link id="favicon" rel="shortcut icon" type="image/x-icon" href="favicon.ico"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="tiapistylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table width="100%">
<tr>
  <td bgcolor="black" width="1"><a href="https://www.ti.com"><img border="0" src="tilogo.gif" /></a></td>
  <td bgcolor="red"><img src="titagline.gif" /></td>
</tr>
</table>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">MSPM0G518xTinyUSBLibrary
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_1ec8ed615bc2da65e0c30f17adbe5612.html">bazel-out</a></li><li class="navelem"><a class="el" href="dir_81796cf7b8c85abf4aaa4478eac07be3.html">k8-opt</a></li><li class="navelem"><a class="el" href="dir_7d9ef33ae1d656eb0f786113430116c5.html">bin</a></li><li class="navelem"><a class="el" href="dir_e0abc62f7a8fffc210aad9d69afc4cc1.html">docs</a></li><li class="navelem"><a class="el" href="dir_f0e6007746a7b6bf614bd6d461732893.html">english</a></li><li class="navelem"><a class="el" href="dir_5cfc70b5e9e2774c8c4411898e903322.html">middleware</a></li><li class="navelem"><a class="el" href="dir_5cdb6e1fec2fafc096960bfe32f87d70.html">tinyusb</a></li><li class="navelem"><a class="el" href="dir_eb9f0ce5e8775716715584811e6370c2.html">doxygen</a></li><li class="navelem"><a class="el" href="dir_5ec402d9453317136643f0d1a3c8e07f.html">mspm0g518x-tinyusb_api_guide-srcs</a></li><li class="navelem"><a class="el" href="dir_de98c2b366e3c05198e2bcdcaadf1c35.html">source</a></li><li class="navelem"><a class="el" href="dir_dd5804f867433addddc8901399967714.html">third_party</a></li><li class="navelem"><a class="el" href="dir_175a11256781c9247f7baab8331f6039.html">tinyusb</a></li><li class="navelem"><a class="el" href="dir_bea4a750cdd5119c01a8115d71c74f07.html">src</a></li><li class="navelem"><a class="el" href="dir_592b5496e73d609a399f01df0dab2893.html">class</a></li><li class="navelem"><a class="el" href="dir_e373b5e00538c34b110a700cab943f60.html">audio</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">audio_device.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="audio__device_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * The MIT License (MIT)</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * Copyright (c) 2020 Ha Thach (tinyusb.org)</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * Copyright (c) 2020 Reinhard Panhuber</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * Copyright (c) 2023 HiFiPhile</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * Permission is hereby granted, free of charge, to any person obtaining a copy</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * of this software and associated documentation files (the &quot;Software&quot;), to deal</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * in the Software without restriction, including without limitation the rights</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * copies of the Software, and to permit persons to whom the Software is</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * furnished to do so, subject to the following conditions:</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * The above copyright notice and this permission notice shall be included in</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * all copies or substantial portions of the Software.</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> * THE SOFTWARE.</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> * This file is part of the TinyUSB stack.</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">/*!****************************************************************************</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"> *  @file       audio_device.h</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"> *  @brief      Audio Device Class Driver implementation</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment"> * </span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment"> * @details This file implements the Audio device driver for TinyUSB stack.</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment"> * It handles the USB Audio protocol including:</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment"> * - Device enumeration and configuration</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment"> * - Audio streaming between USB host and device</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment"> * - Control requests handling (volume, mute, sampling frequency)</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment"> * - Buffer management for audio data</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment"> * The Audio implementation supports:</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment"> * - Multiple audio interfaces</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment"> * - Configurable audio formats and sampling rates</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment"> * - Synchronous and asynchronous audio streaming modes</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment"> * - Volume and mute controls</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment"> * - Multiple audio channels</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment"> * - Feedback for adaptive isochronous transfers</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment"> *   &lt;hr&gt;</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment"> ******************************************************************************/</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#ifndef _TUSB_AUDIO_DEVICE_H_</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#define _TUSB_AUDIO_DEVICE_H_</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &quot;audio.h&quot;</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">//--------------------------------------------------------------------+</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">// Class Driver Configuration</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">//--------------------------------------------------------------------+</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">// All sizes are in bytes!</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_FUNC_1_DESC_LEN</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#error You must tell the driver the length of the audio function descriptor including IAD descriptor</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO &gt; 1</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_FUNC_2_DESC_LEN</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="preprocessor">#error You must tell the driver the length of the audio function descriptor including IAD descriptor</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO &gt; 2</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_FUNC_3_DESC_LEN</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="preprocessor">#error You must tell the driver the length of the audio function descriptor including IAD descriptor</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">// Number of Standard AS Interface Descriptors (4.9.1) defined per audio function - this is required to be able to remember the current alternate settings of these interfaces</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_FUNC_1_N_AS_INT</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="preprocessor">#error You must tell the driver the number of Standard AS Interface Descriptors you have defined in the audio function descriptor!</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO &gt; 1</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_FUNC_2_N_AS_INT</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="preprocessor">#error You must tell the driver the number of Standard AS Interface Descriptors you have defined in the audio function descriptor!</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO &gt; 2</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_FUNC_3_N_AS_INT</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="preprocessor">#error You must tell the driver the number of Standard AS Interface Descriptors you have defined in the audio function descriptor!</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">// Size of control buffer used to receive and send control messages via EP0 - has to be big enough to hold your biggest request structure e.g. range requests with multiple intervals defined or cluster descriptors</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_FUNC_1_CTRL_BUF_SZ</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="preprocessor">#error You must define an audio class control request buffer size!</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO &gt; 1</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_FUNC_2_CTRL_BUF_SZ</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="preprocessor">#error You must define an audio class control request buffer size!</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO &gt; 2</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_FUNC_3_CTRL_BUF_SZ</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="preprocessor">#error You must define an audio class control request buffer size!</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_ENABLE_EP_IN</span></div><div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="group___a_u_d_i_o___d_e_v_i_c_e.html#gaad48dcebe54ca31fb03add291ce36731">  122</a></span>&#160;<span class="preprocessor">#define CFG_TUD_AUDIO_ENABLE_EP_IN 0   // TX</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_ENABLE_EP_OUT</span></div><div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="group___a_u_d_i_o___d_e_v_i_c_e.html#ga0b299e012d39b1aa4659690c4f198b57">  137</a></span>&#160;<span class="preprocessor">#define CFG_TUD_AUDIO_ENABLE_EP_OUT 0  // RX</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">// Maximum EP sizes for all alternate AS interface settings - used for checks and buffer allocation</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO_ENABLE_EP_IN</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_FUNC_1_EP_IN_SZ_MAX</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="preprocessor">#error You must tell the driver the biggest EP IN size!</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO &gt; 1</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_FUNC_2_EP_IN_SZ_MAX</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="preprocessor">#error You must tell the driver the biggest EP IN size!</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO &gt; 2</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_FUNC_3_EP_IN_SZ_MAX</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="preprocessor">#error You must tell the driver the biggest EP IN size!</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="preprocessor">#endif // CFG_TUD_AUDIO_ENABLE_EP_IN</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO_ENABLE_EP_OUT</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_FUNC_1_EP_OUT_SZ_MAX</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="preprocessor">#error You must tell the driver the biggest EP OUT size!</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO &gt; 1</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_FUNC_2_EP_OUT_SZ_MAX</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="preprocessor">#error You must tell the driver the biggest EP OUT size!</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO &gt; 2</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_FUNC_3_EP_OUT_SZ_MAX</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="preprocessor">#error You must tell the driver the biggest EP OUT size!</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="preprocessor">#endif // CFG_TUD_AUDIO_ENABLE_EP_OUT</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_FUNC_1_EP_IN_SW_BUF_SZ</span></div><div class="line"><a name="l00184"></a><span class="lineno"><a class="line" href="group___a_u_d_i_o___d_e_v_i_c_e.html#ga2f44e968494e29ffba870fde3e635609">  184</a></span>&#160;<span class="preprocessor">#define CFG_TUD_AUDIO_FUNC_1_EP_IN_SW_BUF_SZ                0</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_FUNC_2_EP_IN_SW_BUF_SZ</span></div><div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="group___a_u_d_i_o___d_e_v_i_c_e.html#ga458e1c77977f19e2a5441ad98ea2abd8">  198</a></span>&#160;<span class="preprocessor">#define CFG_TUD_AUDIO_FUNC_2_EP_IN_SW_BUF_SZ                0</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_FUNC_3_EP_IN_SW_BUF_SZ</span></div><div class="line"><a name="l00212"></a><span class="lineno"><a class="line" href="group___a_u_d_i_o___d_e_v_i_c_e.html#ga021ef0b1e066c451d9183a758b730079">  212</a></span>&#160;<span class="preprocessor">#define CFG_TUD_AUDIO_FUNC_3_EP_IN_SW_BUF_SZ                0</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_FUNC_1_EP_OUT_SW_BUF_SZ</span></div><div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="group___a_u_d_i_o___d_e_v_i_c_e.html#ga13be1f904bc346b715d91bd8c380750d">  226</a></span>&#160;<span class="preprocessor">#define CFG_TUD_AUDIO_FUNC_1_EP_OUT_SW_BUF_SZ               0</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_FUNC_2_EP_OUT_SW_BUF_SZ</span></div><div class="line"><a name="l00240"></a><span class="lineno"><a class="line" href="group___a_u_d_i_o___d_e_v_i_c_e.html#ga9743864181784be224e907790a3f96da">  240</a></span>&#160;<span class="preprocessor">#define CFG_TUD_AUDIO_FUNC_2_EP_OUT_SW_BUF_SZ               0</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_FUNC_3_EP_OUT_SW_BUF_SZ</span></div><div class="line"><a name="l00254"></a><span class="lineno"><a class="line" href="group___a_u_d_i_o___d_e_v_i_c_e.html#gaf5a66296830b1e32b77492da9d3dcd11">  254</a></span>&#160;<span class="preprocessor">#define CFG_TUD_AUDIO_FUNC_3_EP_OUT_SW_BUF_SZ               0</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO_ENABLE_EP_IN</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO_FUNC_1_EP_IN_SW_BUF_SZ &lt; CFG_TUD_AUDIO_FUNC_1_EP_IN_SZ_MAX</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="preprocessor">#error EP software buffer size MUST BE at least as big as maximum EP size</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO &gt; 1</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO_FUNC_2_EP_IN_SW_BUF_SZ &lt; CFG_TUD_AUDIO_FUNC_2_EP_IN_SZ_MAX</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="preprocessor">#error EP software buffer size MUST BE at least as big as maximum EP size</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO &gt; 2</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO_FUNC_3_EP_IN_SW_BUF_SZ &lt; CFG_TUD_AUDIO_FUNC_3_EP_IN_SZ_MAX</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="preprocessor">#error EP software buffer size MUST BE at least as big as maximum EP size</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO_ENABLE_EP_OUT</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO_FUNC_1_EP_OUT_SW_BUF_SZ &lt; CFG_TUD_AUDIO_FUNC_1_EP_OUT_SZ_MAX</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="preprocessor">#error EP software buffer size MUST BE at least as big as maximum EP size</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO &gt; 1</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO_FUNC_2_EP_OUT_SW_BUF_SZ &lt; CFG_TUD_AUDIO_FUNC_2_EP_OUT_SZ_MAX</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="preprocessor">#error EP software buffer size MUST BE at least as big as maximum EP size</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO &gt; 2</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO_FUNC_3_EP_OUT_SW_BUF_SZ &lt; CFG_TUD_AUDIO_FUNC_3_EP_OUT_SZ_MAX</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="preprocessor">#error EP software buffer size MUST BE at least as big as maximum EP size</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_EP_IN_FLOW_CONTROL</span></div><div class="line"><a name="l00308"></a><span class="lineno"><a class="line" href="group___a_u_d_i_o___d_e_v_i_c_e.html#gaa6b289f06098ab06d472852fb3f87d77">  308</a></span>&#160;<span class="preprocessor">#define CFG_TUD_AUDIO_EP_IN_FLOW_CONTROL  1</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_ENABLE_FEEDBACK_EP</span></div><div class="line"><a name="l00330"></a><span class="lineno"><a class="line" href="group___a_u_d_i_o___d_e_v_i_c_e.html#ga9985d21ce2aa7edd5fc40278556a05b1">  330</a></span>&#160;<span class="preprocessor">#define CFG_TUD_AUDIO_ENABLE_FEEDBACK_EP                    0                             // Feedback - 0 or 1</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_ENABLE_FEEDBACK_FORMAT_CORRECTION</span></div><div class="line"><a name="l00353"></a><span class="lineno"><a class="line" href="group___a_u_d_i_o___d_e_v_i_c_e.html#gaf686eba1eb0a0142d93379a2957f3357">  353</a></span>&#160;<span class="preprocessor">#define CFG_TUD_AUDIO_ENABLE_FEEDBACK_FORMAT_CORRECTION     0                             // 0 or 1</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_ENABLE_INTERRUPT_EP</span></div><div class="line"><a name="l00374"></a><span class="lineno"><a class="line" href="group___a_u_d_i_o___d_e_v_i_c_e.html#ga1f5314a1fb0352ae2fca2e469b5932a9">  374</a></span>&#160;<span class="preprocessor">#define CFG_TUD_AUDIO_ENABLE_INTERRUPT_EP                   0                             // Feedback - 0 or 1</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div><div class="line"><a name="l00392"></a><span class="lineno"><a class="line" href="group___a_u_d_i_o___d_e_v_i_c_e.html#gaf649943f3bcea0032998cb80fabae7a6">  392</a></span>&#160;<span class="preprocessor">#define CFG_TUD_AUDIO_INTERRUPT_EP_SZ                       6</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment">// Use software encoding/decoding</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="comment">// The software coding feature of the driver is not mandatory. It is useful if, for instance, you have two I2S streams which need to be interleaved</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="comment">// into a single PCM stream as SAMPLE_1 | SAMPLE_2 | SAMPLE_3 | SAMPLE_4.</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment">// Currently, only PCM type I encoding/decoding is supported!</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment">// If the coding feature is to be used, support FIFOs need to be configured. Their sizes and numbers are defined below.</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="comment">// Encoding/decoding is done in software and thus time consuming. If you can encode/decode your stream more efficiently do not use the</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment">// support FIFOs but write/read directly into/from the EP_X_SW_BUFFER_FIFOs using</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment">// - tud_audio_n_write() or</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment">// - tud_audio_n_read().</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment">// To write/read to/from the support FIFOs use</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment">// - tud_audio_n_write_support_ff() or</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment">// - tud_audio_n_read_support_ff().</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="comment">// The encoding/decoding format type done is defined below.</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="comment">// The encoding/decoding starts when the private callback functions</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="comment">// - audio_tx_done_cb()</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="comment">// - audio_rx_done_cb()</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="comment">// are invoked. If support FIFOs are used, the corresponding encoding/decoding functions are called from there.</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="comment">// Once encoding/decoding is done the result is put directly into the EP_X_SW_BUFFER_FIFOs. You can use the public callback functions</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="comment">// - tud_audio_tx_done_pre_load_cb() or tud_audio_tx_done_post_load_cb()</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment">// - tud_audio_rx_done_pre_read_cb() or tud_audio_rx_done_post_read_cb()</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="comment">// if you want to get informed what happened.</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment">// If you don&#39;t use the support FIFOs you may use the public callback functions</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment">// - tud_audio_tx_done_pre_load_cb() or tud_audio_tx_done_post_load_cb()</span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment">// - tud_audio_rx_done_pre_read_cb() or tud_audio_rx_done_post_read_cb()</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment">// to write/read from/into the EP_X_SW_BUFFER_FIFOs at the right time.</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="comment">// If you need a different encoding which is not support so far implement it in the</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment">// - audio_tx_done_cb()</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment">// - audio_rx_done_cb()</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment">// functions.</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment">// Enable encoding/decodings - for these to work, support FIFOs need to be setup in appropriate numbers and size</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment">// The actual coding parameters of active AS alternate interface is parsed from the descriptors</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="comment">// The item size of the FIFO is always fixed to one i.e. bytes! Furthermore, the actively used FIFO depth is reconfigured such that the depth is a multiple</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment">// of the current sample size in order to avoid samples to get split up in case of a wrap in the FIFO ring buffer (depth = (max_depth / sample_sz) * sample_sz)!</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment">// This is important to remind in case you use DMAs! If the sample sizes changes, the DMA MUST BE RECONFIGURED just like the FIFOs for a different depth!!!</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="comment">// For PCM encoding/decoding</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_ENABLE_ENCODING</span></div><div class="line"><a name="l00459"></a><span class="lineno"><a class="line" href="group___a_u_d_i_o___d_e_v_i_c_e.html#gafc990ca0921d19627b9f9eea584d2ba5">  459</a></span>&#160;<span class="preprocessor">#define CFG_TUD_AUDIO_ENABLE_ENCODING                       0</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_ENABLE_DECODING</span></div><div class="line"><a name="l00480"></a><span class="lineno"><a class="line" href="group___a_u_d_i_o___d_e_v_i_c_e.html#gad1dc07afd4a6ce0d4fbf39fb5afff6f0">  480</a></span>&#160;<span class="preprocessor">#define CFG_TUD_AUDIO_ENABLE_DECODING                       0</span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_ENABLE_TYPE_I_ENCODING</span></div><div class="line"><a name="l00491"></a><span class="lineno"><a class="line" href="group___a_u_d_i_o___d_e_v_i_c_e.html#gad7ec46708fc4ad1d5676f4d59ef7900d">  491</a></span>&#160;<span class="preprocessor">#define CFG_TUD_AUDIO_ENABLE_TYPE_I_ENCODING                0</span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_ENABLE_TYPE_I_DECODING</span></div><div class="line"><a name="l00502"></a><span class="lineno"><a class="line" href="group___a_u_d_i_o___d_e_v_i_c_e.html#ga511945393fd0ad1d2484d147230e3766">  502</a></span>&#160;<span class="preprocessor">#define CFG_TUD_AUDIO_ENABLE_TYPE_I_DECODING                0</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="comment">// Type I Coding parameters not given within UAC2 descriptors</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment">// It would be possible to allow for a more flexible setting and not fix this parameter as done below. However, this is most often not needed and kept for later if really necessary. The more flexible setting could be implemented within set_interface(), however, how the values are saved per alternate setting is to be determined!</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO_ENABLE_EP_IN &amp;&amp; CFG_TUD_AUDIO_ENABLE_ENCODING &amp;&amp; CFG_TUD_AUDIO_ENABLE_TYPE_I_ENCODING</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_FUNC_1_CHANNEL_PER_FIFO_TX</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="preprocessor">#error You must tell the driver the number of channels per FIFO for the interleaved encoding! E.g. for an I2S interface having two channels, CHANNEL_PER_FIFO = 2 as the I2S stream having two channels is usually saved within one FIFO</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO &gt; 1</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_FUNC_2_CHANNEL_PER_FIFO_TX</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="preprocessor">#error You must tell the driver the number of channels per FIFO for the interleaved encoding! E.g. for an I2S interface having two channels, CHANNEL_PER_FIFO = 2 as the I2S stream having two channels is usually saved within one FIFO</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO &gt; 2</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_FUNC_3_CHANNEL_PER_FIFO_TX</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="preprocessor">#error You must tell the driver the number of channels per FIFO for the interleaved encoding! E.g. for an I2S interface having two channels, CHANNEL_PER_FIFO = 2 as the I2S stream having two channels is usually saved within one FIFO</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO_ENABLE_EP_OUT &amp;&amp; CFG_TUD_AUDIO_ENABLE_DECODING &amp;&amp; CFG_TUD_AUDIO_ENABLE_TYPE_I_DECODING</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_FUNC_1_CHANNEL_PER_FIFO_RX</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="preprocessor">#error You must tell the driver the number of channels per FIFO for the interleaved encoding! E.g. for an I2S interface having two channels, CHANNEL_PER_FIFO = 2 as the I2S stream having two channels is usually saved within one FIFO</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO &gt; 1</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_FUNC_2_CHANNEL_PER_FIFO_RX</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="preprocessor">#error You must tell the driver the number of channels per FIFO for the interleaved encoding! E.g. for an I2S interface having two channels, CHANNEL_PER_FIFO = 2 as the I2S stream having two channels is usually saved within one FIFO</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO &gt; 2</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_FUNC_3_CHANNEL_PER_FIFO_RX</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="preprocessor">#error You must tell the driver the number of channels per FIFO for the interleaved encoding! E.g. for an I2S interface having two channels, CHANNEL_PER_FIFO = 2 as the I2S stream having two channels is usually saved within one FIFO</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment">// Remaining types not support so far</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment">// Number of support FIFOs to set up - multiple channels can be handled by one FIFO - very common is two channels per FIFO stemming from one I2S interface</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_FUNC_1_N_TX_SUPP_SW_FIFO</span></div><div class="line"><a name="l00556"></a><span class="lineno"><a class="line" href="group___a_u_d_i_o___d_e_v_i_c_e.html#ga3337b0b976b2862df666121bb214678c">  556</a></span>&#160;<span class="preprocessor">#define CFG_TUD_AUDIO_FUNC_1_N_TX_SUPP_SW_FIFO              0</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_FUNC_2_N_TX_SUPP_SW_FIFO</span></div><div class="line"><a name="l00572"></a><span class="lineno"><a class="line" href="group___a_u_d_i_o___d_e_v_i_c_e.html#ga264996bd10e8366693a100a520f8d222">  572</a></span>&#160;<span class="preprocessor">#define CFG_TUD_AUDIO_FUNC_2_N_TX_SUPP_SW_FIFO              0</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_FUNC_3_N_TX_SUPP_SW_FIFO</span></div><div class="line"><a name="l00588"></a><span class="lineno"><a class="line" href="group___a_u_d_i_o___d_e_v_i_c_e.html#ga0fd781a32deb7cb1abf1c6a968714b99">  588</a></span>&#160;<span class="preprocessor">#define CFG_TUD_AUDIO_FUNC_3_N_TX_SUPP_SW_FIFO              0</span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_FUNC_1_N_RX_SUPP_SW_FIFO</span></div><div class="line"><a name="l00604"></a><span class="lineno"><a class="line" href="group___a_u_d_i_o___d_e_v_i_c_e.html#ga7cd83111ab0cea4e4371ae7c6aa00443">  604</a></span>&#160;<span class="preprocessor">#define CFG_TUD_AUDIO_FUNC_1_N_RX_SUPP_SW_FIFO              0</span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_FUNC_2_N_RX_SUPP_SW_FIFO</span></div><div class="line"><a name="l00620"></a><span class="lineno"><a class="line" href="group___a_u_d_i_o___d_e_v_i_c_e.html#ga30d4aaf9c69492efd5ef967bf7a5ca23">  620</a></span>&#160;<span class="preprocessor">#define CFG_TUD_AUDIO_FUNC_2_N_RX_SUPP_SW_FIFO              0</span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_FUNC_3_N_RX_SUPP_SW_FIFO</span></div><div class="line"><a name="l00636"></a><span class="lineno"><a class="line" href="group___a_u_d_i_o___d_e_v_i_c_e.html#gaba1a2511c2b574e4384ad8a750898fc2">  636</a></span>&#160;<span class="preprocessor">#define CFG_TUD_AUDIO_FUNC_3_N_RX_SUPP_SW_FIFO              0</span></div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="comment">// Size of support FIFOs IN BYTES - if size &gt; 0 there are as many FIFOs set up as CFG_TUD_AUDIO_FUNC_X_N_TX_SUPP_SW_FIFO and CFG_TUD_AUDIO_FUNC_X_N_RX_SUPP_SW_FIFO</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_FUNC_1_TX_SUPP_SW_FIFO_SZ</span></div><div class="line"><a name="l00654"></a><span class="lineno"><a class="line" href="group___a_u_d_i_o___d_e_v_i_c_e.html#ga31479858f794649f804e8a16b2887afe">  654</a></span>&#160;<span class="preprocessor">#define CFG_TUD_AUDIO_FUNC_1_TX_SUPP_SW_FIFO_SZ             0         // FIFO size - minimum size: ceil(f_s/1000) * max(# of TX channels) / (# of TX support FIFOs) * max(# of bytes per sample)</span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_FUNC_2_TX_SUPP_SW_FIFO_SZ</span></div><div class="line"><a name="l00670"></a><span class="lineno"><a class="line" href="group___a_u_d_i_o___d_e_v_i_c_e.html#ga9898eb0dd2f0f5116ddbbcdd938b9003">  670</a></span>&#160;<span class="preprocessor">#define CFG_TUD_AUDIO_FUNC_2_TX_SUPP_SW_FIFO_SZ             0</span></div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_FUNC_3_TX_SUPP_SW_FIFO_SZ</span></div><div class="line"><a name="l00686"></a><span class="lineno"><a class="line" href="group___a_u_d_i_o___d_e_v_i_c_e.html#ga239e23c79fb707110d0dbe5ad5f4589d">  686</a></span>&#160;<span class="preprocessor">#define CFG_TUD_AUDIO_FUNC_3_TX_SUPP_SW_FIFO_SZ             0</span></div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_FUNC_1_RX_SUPP_SW_FIFO_SZ</span></div><div class="line"><a name="l00696"></a><span class="lineno"><a class="line" href="group___a_u_d_i_o___d_e_v_i_c_e.html#gad3767031a5654e9319c241d7a3846f2e">  696</a></span>&#160;<span class="preprocessor">#define CFG_TUD_AUDIO_FUNC_1_RX_SUPP_SW_FIFO_SZ             0         // FIFO size - minimum size: ceil(f_s/1000) * max(# of RX channels) / (# of RX support FIFOs) * max(# of bytes per sample)</span></div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_FUNC_2_RX_SUPP_SW_FIFO_SZ</span></div><div class="line"><a name="l00706"></a><span class="lineno"><a class="line" href="group___a_u_d_i_o___d_e_v_i_c_e.html#ga32281dd7ddbcdd0146e27a6cf3756607">  706</a></span>&#160;<span class="preprocessor">#define CFG_TUD_AUDIO_FUNC_2_RX_SUPP_SW_FIFO_SZ             0</span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="preprocessor">#ifndef CFG_TUD_AUDIO_FUNC_3_RX_SUPP_SW_FIFO_SZ</span></div><div class="line"><a name="l00716"></a><span class="lineno"><a class="line" href="group___a_u_d_i_o___d_e_v_i_c_e.html#gac83c890e673d2ad80ea21919ae913a36">  716</a></span>&#160;<span class="preprocessor">#define CFG_TUD_AUDIO_FUNC_3_RX_SUPP_SW_FIFO_SZ             0</span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;<span class="comment">//static_assert(sizeof(tud_audio_desc_lengths) != CFG_TUD_AUDIO, &quot;Supply audio function descriptor pack length!&quot;);</span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;<span class="comment">// Supported types of this driver:</span></div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;<span class="comment">// AUDIO_DATA_FORMAT_TYPE_I_PCM     -   Required definitions: CFG_TUD_AUDIO_N_CHANNELS and CFG_TUD_AUDIO_BYTES_PER_CHANNEL</span></div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;<span class="comment">//--------------------------------------------------------------------+</span></div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;<span class="comment">// Application API (Multiple Interfaces)</span></div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;<span class="comment">// CFG_TUD_AUDIO &gt; 1</span></div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<span class="comment">//--------------------------------------------------------------------+</span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span>     <a class="code" href="group___a_u_d_i_o___d_e_v_i_c_e.html#gaeaf1722e90fbc7604cc92bdd681410fd">tud_audio_n_mounted</a>    (uint8_t func_id);</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO_ENABLE_EP_OUT &amp;&amp; !CFG_TUD_AUDIO_ENABLE_DECODING</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;uint16_t tud_audio_n_available                    (uint8_t func_id);</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;uint16_t tud_audio_n_read                         (uint8_t func_id, <span class="keywordtype">void</span>* buffer, uint16_t bufsize);</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="keywordtype">bool</span>     tud_audio_n_clear_ep_out_ff              (uint8_t func_id);                          <span class="comment">// Delete all content in the EP OUT FIFO</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;tu_fifo_t*   tud_audio_n_get_ep_out_ff            (uint8_t func_id);</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO_ENABLE_EP_OUT &amp;&amp; CFG_TUD_AUDIO_ENABLE_DECODING</span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="keywordtype">bool</span>     tud_audio_n_clear_rx_support_ff          (uint8_t func_id, uint8_t ff_idx);       <span class="comment">// Delete all content in the support RX FIFOs</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;uint16_t tud_audio_n_available_support_ff         (uint8_t func_id, uint8_t ff_idx);</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;uint16_t tud_audio_n_read_support_ff              (uint8_t func_id, uint8_t ff_idx, <span class="keywordtype">void</span>* buffer, uint16_t bufsize);</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;tu_fifo_t* tud_audio_n_get_rx_support_ff          (uint8_t func_id, uint8_t ff_idx);</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO_ENABLE_EP_IN &amp;&amp; !CFG_TUD_AUDIO_ENABLE_ENCODING</span></div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;uint16_t tud_audio_n_write                        (uint8_t func_id, <span class="keyword">const</span> <span class="keywordtype">void</span> * data, uint16_t len);</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="keywordtype">bool</span>     tud_audio_n_clear_ep_in_ff               (uint8_t func_id);                          <span class="comment">// Delete all content in the EP IN FIFO</span></div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;tu_fifo_t*   tud_audio_n_get_ep_in_ff             (uint8_t func_id);</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO_ENABLE_EP_IN &amp;&amp; CFG_TUD_AUDIO_ENABLE_ENCODING</span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;uint16_t tud_audio_n_flush_tx_support_ff          (uint8_t func_id);      <span class="comment">// Force all content in the support TX FIFOs to be written into EP SW FIFO</span></div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="keywordtype">bool</span>     tud_audio_n_clear_tx_support_ff          (uint8_t func_id, uint8_t ff_idx);</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;uint16_t tud_audio_n_write_support_ff             (uint8_t func_id, uint8_t ff_idx, <span class="keyword">const</span> <span class="keywordtype">void</span> * data, uint16_t len);</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;tu_fifo_t* tud_audio_n_get_tx_support_ff          (uint8_t func_id, uint8_t ff_idx);</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO_ENABLE_INTERRUPT_EP</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="keywordtype">bool</span>    tud_audio_int_n_write                     (uint8_t func_id, <span class="keyword">const</span> audio_interrupt_data_t * data);</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;<span class="comment">//--------------------------------------------------------------------+</span></div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;<span class="comment">// Application API (Interface0)</span></div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;<span class="comment">//--------------------------------------------------------------------+</span></div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span>         <a class="code" href="group___a_u_d_i_o___d_e_v_i_c_e.html#ga873bcba48292e5301b6f84ab9a9ae3c4">tud_audio_mounted</a>                (<span class="keywordtype">void</span>);</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;<span class="comment">// RX API</span></div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO_ENABLE_EP_OUT &amp;&amp; !CFG_TUD_AUDIO_ENABLE_DECODING</span></div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> uint16_t     tud_audio_available              (<span class="keywordtype">void</span>);</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span>         tud_audio_clear_ep_out_ff        (<span class="keywordtype">void</span>);                       <span class="comment">// Delete all content in the EP OUT FIFO</span></div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> uint16_t     tud_audio_read                   (<span class="keywordtype">void</span>* buffer, uint16_t bufsize);</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> tu_fifo_t*   tud_audio_get_ep_out_ff          (<span class="keywordtype">void</span>);</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO_ENABLE_EP_OUT &amp;&amp; CFG_TUD_AUDIO_ENABLE_DECODING</span></div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span>     tud_audio_clear_rx_support_ff        (uint8_t ff_idx);</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> uint16_t tud_audio_available_support_ff       (uint8_t ff_idx);</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> uint16_t tud_audio_read_support_ff            (uint8_t ff_idx, <span class="keywordtype">void</span>* buffer, uint16_t bufsize);</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> tu_fifo_t* tud_audio_get_rx_support_ff        (uint8_t ff_idx);</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;<span class="comment">// TX API</span></div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO_ENABLE_EP_IN &amp;&amp; !CFG_TUD_AUDIO_ENABLE_ENCODING</span></div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> uint16_t tud_audio_write                      (<span class="keyword">const</span> <span class="keywordtype">void</span> * data, uint16_t len);</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span>         tud_audio_clear_ep_in_ff             (<span class="keywordtype">void</span>);</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> tu_fifo_t* tud_audio_get_ep_in_ff             (<span class="keywordtype">void</span>);</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO_ENABLE_EP_IN &amp;&amp; CFG_TUD_AUDIO_ENABLE_ENCODING</span></div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> uint16_t tud_audio_flush_tx_support_ff        (<span class="keywordtype">void</span>);</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> uint16_t tud_audio_clear_tx_support_ff        (uint8_t ff_idx);</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> uint16_t tud_audio_write_support_ff           (uint8_t ff_idx, <span class="keyword">const</span> <span class="keywordtype">void</span> * data, uint16_t len);</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> tu_fifo_t* tud_audio_get_tx_support_ff        (uint8_t ff_idx);</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;<span class="comment">// INT CTR API</span></div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO_ENABLE_INTERRUPT_EP</span></div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> tud_audio_int_write                      (<span class="keyword">const</span> audio_interrupt_data_t * data);</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;<span class="comment">// Buffer control EP data and schedule a transmit</span></div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;<span class="comment">// This function is intended to be used if you do not have a persistent buffer or memory location available (e.g. non-local variables) and need to answer onto a</span></div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;<span class="comment">// get request. This function buffers your answer request frame into the control buffer of the corresponding audio driver and schedules a transmit for sending it.</span></div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;<span class="comment">// Since transmission is triggered via interrupts, a persistent memory location is required onto which the buffer pointer in pointing. If you already have such</span></div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;<span class="comment">// available you may directly use &#39;tud_control_xfer(...)&#39;. In this case data does not need to be copied into an additional buffer and you save some time.</span></div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;<span class="comment">// If the request&#39;s wLength is zero, a status packet is sent instead.</span></div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___a_u_d_i_o___d_e_v_i_c_e.html#ga174b50cfb8892143b096a48c3c2f1b80">tud_audio_buffer_and_schedule_control_xfer</a>(uint8_t rhport, tusb_control_request_t <span class="keyword">const</span> * p_request, <span class="keywordtype">void</span>* data, uint16_t len);</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;<span class="comment">//--------------------------------------------------------------------+</span></div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;<span class="comment">// Application Callback API</span></div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;<span class="comment">//--------------------------------------------------------------------+</span></div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO_ENABLE_EP_IN</span></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;<span class="keywordtype">bool</span> tud_audio_tx_done_pre_load_cb(uint8_t rhport, uint8_t func_id, uint8_t ep_in, uint8_t cur_alt_setting);</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;<span class="keywordtype">bool</span> tud_audio_tx_done_post_load_cb(uint8_t rhport, uint16_t n_bytes_copied, uint8_t func_id, uint8_t ep_in, uint8_t cur_alt_setting);</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO_ENABLE_EP_OUT</span></div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="keywordtype">bool</span> tud_audio_rx_done_pre_read_cb(uint8_t rhport, uint16_t n_bytes_received, uint8_t func_id, uint8_t ep_out, uint8_t cur_alt_setting);</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;<span class="keywordtype">bool</span> tud_audio_rx_done_post_read_cb(uint8_t rhport, uint16_t n_bytes_received, uint8_t func_id, uint8_t ep_out, uint8_t cur_alt_setting);</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO_ENABLE_EP_OUT &amp;&amp; CFG_TUD_AUDIO_ENABLE_FEEDBACK_EP</span></div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;<span class="keywordtype">void</span> tud_audio_fb_done_cb(uint8_t func_id);</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;<span class="comment">// Note about feedback calculation</span></div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;<span class="comment">// Option 1 - AUDIO_FEEDBACK_METHOD_FIFO_COUNT</span></div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;<span class="comment">// Feedback value is calculated within the audio driver by regulating the FIFO level to half fill.</span></div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;<span class="comment">// Advantage: No ISR interrupt is enabled, hence the CPU need not to handle an ISR every 1ms or 125us and thus less CPU load, well tested</span></div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;<span class="comment">// (Windows, Linux, OSX) with a reliable result so far.</span></div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;<span class="comment">// Disadvantage: A FIFO of minimal 4 frames is needed to compensate for jitter, an average delay of 2 frames is introduced.</span></div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;<span class="comment">// Option 2 - AUDIO_FEEDBACK_METHOD_FREQUENCY_FIXED / AUDIO_FEEDBACK_METHOD_FREQUENCY_FLOAT</span></div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;<span class="comment">// Feedback value is calculated within the audio driver by use of SOF interrupt. The driver needs information about the master clock f_m from</span></div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;<span class="comment">// which the audio sample frequency f_s is derived, f_s itself, and the cycle count of f_m at time of the SOF interrupt (e.g. by use of a hardware counter).</span></div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;<span class="comment">// See tud_audio_set_fb_params() and tud_audio_feedback_update()</span></div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;<span class="comment">// Advantage: Reduced jitter in the feedback value computation, hence, the receive FIFO can be smaller and thus a smaller delay is possible.</span></div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;<span class="comment">// Disadvantage: higher CPU load due to SOF ISR handling every frame i.e. 1ms or 125us. (The most critical point is the reading of the cycle counter value of f_m.</span></div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;<span class="comment">// It is read from within the SOF ISR - see: audiod_sof() -, hence, the ISR must has a high priority such that no software dependent &quot;random&quot; delay i.e. jitter is introduced).</span></div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;<span class="comment">// Long-term drift could occur since error is accumulated.</span></div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;<span class="comment">// Option 3 - manual</span></div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;<span class="comment">// Determined by the user itself and set by use of tud_audio_n_fb_set(). The feedback value may be determined e.g. from some fill status of some FIFO buffer.</span></div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;<span class="comment">// Advantage: No ISR interrupt is enabled, hence the CPU need not to handle an ISR every 1ms or 125us and thus less CPU load.</span></div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;<span class="comment">// Disadvantage: typically a larger FIFO is needed to compensate for jitter (e.g. 6 frames), i.e. a larger delay is introduced.</span></div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;<span class="comment">// This function is used to provide data rate feedback from an asynchronous sink. Feedback value will be sent at FB endpoint interval till it&#39;s changed.</span></div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;<span class="comment">// The feedback format is specified to be 16.16 for HS and 10.14 for FS devices (see Universal Serial Bus Specification Revision 2.0 5.12.4.2). By default,</span></div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;<span class="comment">// the choice of format is left to the caller and feedback argument is sent as-is. If CFG_TUD_AUDIO_ENABLE_FEEDBACK_FORMAT_CORRECTION is set or tud_audio_feedback_format_correction_cb()</span></div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;<span class="comment">// return true, then tinyusb expects 16.16 format and handles the conversion to 10.14 on FS.</span></div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;<span class="comment">// Note that due to a bug in its USB Audio 2.0 driver, Windows currently requires 16.16 format for _all_ USB 2.0 devices. On Linux and it seems the</span></div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;<span class="comment">// driver can work with either format.</span></div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;<span class="comment">// Feedback value can be determined from within the SOF ISR of the audio driver. This should reduce jitter. If the feature is used, the user can not set the feedback value.</span></div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;<span class="comment">// Determine feedback value - The feedback method is described in 5.12.4.2 of the USB 2.0 spec</span></div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;<span class="comment">// Boiled down, the feedback value Ff = n_samples / (micro)frame.</span></div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;<span class="comment">// Since an accuracy of less than 1 Sample / second is desired, at least n_frames = ceil(2^K * f_s / f_m) frames need to be measured, where K = 10 for full speed and K = 13</span></div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;<span class="comment">// for high speed, f_s is the sampling frequency e.g. 48 kHz and f_m is the cpu clock frequency e.g. 100 MHz (or any other master clock whose clock count is available and locked to f_s)</span></div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;<span class="comment">// The update interval in the (4.10.2.1) Feedback Endpoint Descriptor must be less or equal to 2^(K - P), where P = min( ceil(log2(f_m / f_s)), K)</span></div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;<span class="comment">// feedback = n_cycles / n_frames * f_s / f_m in 16.16 format, where n_cycles are the number of main clock cycles within fb_n_frames</span></div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;<span class="keywordtype">bool</span> tud_audio_n_fb_set(uint8_t func_id, uint32_t feedback);</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;<span class="comment">// Update feedback value with passed MCLK cycles since last time this update function is called.</span></div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;<span class="comment">// Typically called within tud_audio_sof_isr(). Required tud_audio_feedback_params_cb() is implemented</span></div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;<span class="comment">// This function will also call tud_audio_feedback_set()</span></div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;<span class="comment">// return feedback value in 16.16 for reference (0 for error)</span></div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;<span class="comment">// Example :</span></div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;<span class="comment">//   binterval=3 (4ms); FS = 48kHz; MCLK = 12.288MHz</span></div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;<span class="comment">//   In 4 SOF MCLK counted 49152 cycles</span></div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;uint32_t tud_audio_feedback_update(uint8_t func_id, uint32_t cycles);</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;<span class="keyword">enum</span> {</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  AUDIO_FEEDBACK_METHOD_DISABLED,</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  AUDIO_FEEDBACK_METHOD_FREQUENCY_FIXED,</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;  AUDIO_FEEDBACK_METHOD_FREQUENCY_FLOAT,</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;  AUDIO_FEEDBACK_METHOD_FREQUENCY_POWER_OF_2, <span class="comment">// For driver internal use only</span></div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;  AUDIO_FEEDBACK_METHOD_FIFO_COUNT</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;};</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;  uint8_t method;</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;  uint32_t sample_freq;   <span class="comment">//  sample frequency in Hz</span></div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  <span class="keyword">union </span>{</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    <span class="keyword">struct </span>{</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;      uint32_t mclk_freq; <span class="comment">// Main clock frequency in Hz i.e. master clock to which sample clock is based on</span></div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    }frequency;</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;  };</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;}audio_feedback_params_t;</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;<span class="comment">// Invoked when needed to set feedback parameters</span></div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;<span class="keywordtype">void</span> tud_audio_feedback_params_cb(uint8_t func_id, uint8_t alt_itf, audio_feedback_params_t* feedback_param);</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;<span class="comment">// Callback in ISR context, invoked periodically according to feedback endpoint bInterval.</span></div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="comment">// Could be used to compute and update feedback value, should be placed in RAM if possible</span></div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;<span class="comment">// frame_number  : current SOF count</span></div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;<span class="comment">// interval_shift: number of bit shift i.e log2(interval) from Feedback endpoint descriptor</span></div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;TU_ATTR_FAST_FUNC <span class="keywordtype">void</span> tud_audio_feedback_interval_isr(uint8_t func_id, uint32_t frame_number, uint8_t interval_shift);</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;<span class="comment">// (Full-Speed only) Callback to set feedback format correction is applied or not,</span></div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;<span class="comment">// default to CFG_TUD_AUDIO_ENABLE_FEEDBACK_FORMAT_CORRECTION if not implemented.</span></div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;<span class="keywordtype">bool</span> tud_audio_feedback_format_correction_cb(uint8_t func_id);</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;<span class="preprocessor">#endif // CFG_TUD_AUDIO_ENABLE_EP_OUT &amp;&amp; CFG_TUD_AUDIO_ENABLE_FEEDBACK_EP</span></div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO_ENABLE_INTERRUPT_EP</span></div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;<span class="keywordtype">void</span> tud_audio_int_done_cb(uint8_t rhport);</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___a_u_d_i_o___d_e_v_i_c_e.html#gae247fc7bb1effb1be9d40e0a911f1872">tud_audio_set_itf_cb</a>(uint8_t rhport, tusb_control_request_t <span class="keyword">const</span> * p_request);</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___a_u_d_i_o___d_e_v_i_c_e.html#gae6b28715bb6164b878aa3cc7443f1427">tud_audio_set_itf_close_EP_cb</a>(uint8_t rhport, tusb_control_request_t <span class="keyword">const</span> * p_request);</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___a_u_d_i_o___d_e_v_i_c_e.html#gacb68567b1d7debb5868c26b864b3e2b6">tud_audio_set_req_ep_cb</a>(uint8_t rhport, tusb_control_request_t <span class="keyword">const</span> * p_request, uint8_t *pBuff);</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___a_u_d_i_o___d_e_v_i_c_e.html#gafa56d5c9c8813afa52b387dda84f311f">tud_audio_set_req_itf_cb</a>(uint8_t rhport, tusb_control_request_t <span class="keyword">const</span> * p_request, uint8_t *pBuff);</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___a_u_d_i_o___d_e_v_i_c_e.html#gaf00be9e83cf49eccbd81945bf2a5688d">tud_audio_set_req_entity_cb</a>(uint8_t rhport, tusb_control_request_t <span class="keyword">const</span> * p_request, uint8_t *pBuff);</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___a_u_d_i_o___d_e_v_i_c_e.html#ga5b9f2fd3de305ed9003cfa10509fc39a">tud_audio_get_req_ep_cb</a>(uint8_t rhport, tusb_control_request_t <span class="keyword">const</span> * p_request);</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___a_u_d_i_o___d_e_v_i_c_e.html#ga220604dba0d21db143eb8122dae57e6d">tud_audio_get_req_itf_cb</a>(uint8_t rhport, tusb_control_request_t <span class="keyword">const</span> * p_request);</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___a_u_d_i_o___d_e_v_i_c_e.html#gac02b051352214ff36b6071c45a42d2ba">tud_audio_get_req_entity_cb</a>(uint8_t rhport, tusb_control_request_t <span class="keyword">const</span> * p_request);</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;<span class="comment">//--------------------------------------------------------------------+</span></div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;<span class="comment">// Inline Functions</span></div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;<span class="comment">//--------------------------------------------------------------------+</span></div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;</div><div class="line"><a name="l01141"></a><span class="lineno"><a class="line" href="group___a_u_d_i_o___d_e_v_i_c_e.html#ga873bcba48292e5301b6f84ab9a9ae3c4"> 1141</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group___a_u_d_i_o___d_e_v_i_c_e.html#ga873bcba48292e5301b6f84ab9a9ae3c4">tud_audio_mounted</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;{</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group___a_u_d_i_o___d_e_v_i_c_e.html#gaeaf1722e90fbc7604cc92bdd681410fd">tud_audio_n_mounted</a>(0);</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;}</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;<span class="comment">// RX API</span></div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO_ENABLE_EP_OUT &amp;&amp; !CFG_TUD_AUDIO_ENABLE_DECODING</span></div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> uint16_t tud_audio_available(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;{</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;  <span class="keywordflow">return</span> tud_audio_n_available(0);</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;}</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> uint16_t tud_audio_read(<span class="keywordtype">void</span>* buffer, uint16_t bufsize)</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;{</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;  <span class="keywordflow">return</span> tud_audio_n_read(0, buffer, bufsize);</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;}</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> tud_audio_clear_ep_out_ff(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;{</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;  <span class="keywordflow">return</span> tud_audio_n_clear_ep_out_ff(0);</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;}</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> tu_fifo_t* tud_audio_get_ep_out_ff(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;{</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;  <span class="keywordflow">return</span> tud_audio_n_get_ep_out_ff(0);</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;}</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO_ENABLE_EP_OUT &amp;&amp; CFG_TUD_AUDIO_ENABLE_DECODING</span></div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> tud_audio_clear_rx_support_ff(uint8_t ff_idx)</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;{</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;  <span class="keywordflow">return</span> tud_audio_n_clear_rx_support_ff(0, ff_idx);</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;}</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> uint16_t tud_audio_available_support_ff(uint8_t ff_idx)</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;{</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;  <span class="keywordflow">return</span> tud_audio_n_available_support_ff(0, ff_idx);</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;}</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> uint16_t tud_audio_read_support_ff(uint8_t ff_idx, <span class="keywordtype">void</span>* buffer, uint16_t bufsize)</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;{</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;  <span class="keywordflow">return</span> tud_audio_n_read_support_ff(0, ff_idx, buffer, bufsize);</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;}</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> tu_fifo_t* tud_audio_get_rx_support_ff(uint8_t ff_idx)</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;{</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;  <span class="keywordflow">return</span> tud_audio_n_get_rx_support_ff(0, ff_idx);</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;}</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;<span class="comment">// TX API</span></div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO_ENABLE_EP_IN &amp;&amp; !CFG_TUD_AUDIO_ENABLE_ENCODING</span></div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> uint16_t tud_audio_write(<span class="keyword">const</span> <span class="keywordtype">void</span> * data, uint16_t len)</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;{</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;  <span class="keywordflow">return</span> tud_audio_n_write(0, data, len);</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;}</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> tud_audio_clear_ep_in_ff(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;{</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;  <span class="keywordflow">return</span> tud_audio_n_clear_ep_in_ff(0);</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;}</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> tu_fifo_t* tud_audio_get_ep_in_ff(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;{</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;  <span class="keywordflow">return</span> tud_audio_n_get_ep_in_ff(0);</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;}</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO_ENABLE_EP_IN &amp;&amp; CFG_TUD_AUDIO_ENABLE_ENCODING</span></div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> uint16_t tud_audio_flush_tx_support_ff(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;{</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;  <span class="keywordflow">return</span> tud_audio_n_flush_tx_support_ff(0);</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;}</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> uint16_t tud_audio_clear_tx_support_ff(uint8_t ff_idx)</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;{</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;  <span class="keywordflow">return</span> tud_audio_n_clear_tx_support_ff(0, ff_idx);</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;}</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> uint16_t tud_audio_write_support_ff(uint8_t ff_idx, <span class="keyword">const</span> <span class="keywordtype">void</span> * data, uint16_t len)</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;{</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;  <span class="keywordflow">return</span> tud_audio_n_write_support_ff(0, ff_idx, data, len);</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;}</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> tu_fifo_t* tud_audio_get_tx_support_ff(uint8_t ff_idx)</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;{</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;  <span class="keywordflow">return</span> tud_audio_n_get_tx_support_ff(0, ff_idx);</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;}</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO_ENABLE_INTERRUPT_EP</span></div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> tud_audio_int_write(<span class="keyword">const</span> audio_interrupt_data_t * data)</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;{</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;  <span class="keywordflow">return</span> tud_audio_int_n_write(0, data);</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;}</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;<span class="preprocessor">#if CFG_TUD_AUDIO_ENABLE_EP_OUT &amp;&amp; CFG_TUD_AUDIO_ENABLE_FEEDBACK_EP</span></div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> tud_audio_fb_set(uint32_t feedback)</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;{</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;  <span class="keywordflow">return</span> tud_audio_n_fb_set(0, feedback);</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;}</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;<span class="comment">//--------------------------------------------------------------------+</span></div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;<span class="comment">// Internal Class Driver API</span></div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;<span class="comment">//--------------------------------------------------------------------+</span></div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;<span class="keywordtype">void</span>     <a class="code" href="group___a_u_d_i_o___d_e_v_i_c_e.html#ga4fa6dd742c1d1fd387767079876c8f19">audiod_init</a>           (<span class="keywordtype">void</span>);</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;<span class="keywordtype">bool</span>     <a class="code" href="group___a_u_d_i_o___d_e_v_i_c_e.html#ga6b1f479dddacbab1d2b2c7f050e358d9">audiod_deinit</a>         (<span class="keywordtype">void</span>);</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;<span class="keywordtype">void</span>     <a class="code" href="group___a_u_d_i_o___d_e_v_i_c_e.html#ga94447dfe41f27fdde46871973a236886">audiod_reset</a>          (uint8_t rhport);</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;uint16_t <a class="code" href="group___a_u_d_i_o___d_e_v_i_c_e.html#ga05dc4cf6537e042cceacbc9fddcf5bd4">audiod_open</a>           (uint8_t rhport, tusb_desc_interface_t <span class="keyword">const</span> * itf_desc, uint16_t max_len);</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;<span class="keywordtype">bool</span>     <a class="code" href="group___a_u_d_i_o___d_e_v_i_c_e.html#ga203ac09097d03c0e5669883120698746">audiod_control_xfer_cb</a>(uint8_t rhport, uint8_t stage, tusb_control_request_t <span class="keyword">const</span> * request);</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;<span class="keywordtype">bool</span>     <a class="code" href="group___a_u_d_i_o___d_e_v_i_c_e.html#ga267968271f1e5533c5a529a4bb452fe9">audiod_xfer_cb</a>        (uint8_t rhport, uint8_t edpt_addr, xfer_result_t result, uint32_t xferred_bytes);</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;<span class="keywordtype">void</span>     <a class="code" href="group___a_u_d_i_o___d_e_v_i_c_e.html#ga11bf9129dfada6cf2d4b82b70cee49e1">audiod_sof_isr</a>        (uint8_t rhport, uint32_t frame_count);</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;}</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* _TUSB_AUDIO_DEVICE_H_ */</span><span class="preprocessor"></span></div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160; <span class="comment">/* End of AUDIO_DEVICE */</span></div><div class="ttc" id="group___a_u_d_i_o___d_e_v_i_c_e_html_ga5b9f2fd3de305ed9003cfa10509fc39a"><div class="ttname"><a href="group___a_u_d_i_o___d_e_v_i_c_e.html#ga5b9f2fd3de305ed9003cfa10509fc39a">tud_audio_get_req_ep_cb</a></div><div class="ttdeci">bool tud_audio_get_req_ep_cb(uint8_t rhport, tusb_control_request_t const *p_request)</div><div class="ttdoc">Callback when audio class specific get request is received for an endpoint. </div></div>
<div class="ttc" id="group___a_u_d_i_o___d_e_v_i_c_e_html_ga873bcba48292e5301b6f84ab9a9ae3c4"><div class="ttname"><a href="group___a_u_d_i_o___d_e_v_i_c_e.html#ga873bcba48292e5301b6f84ab9a9ae3c4">tud_audio_mounted</a></div><div class="ttdeci">static bool tud_audio_mounted(void)</div><div class="ttdoc">Check if the default audio function is mounted by the host. </div><div class="ttdef"><b>Definition:</b> audio_device.h:1141</div></div>
<div class="ttc" id="group___a_u_d_i_o___d_e_v_i_c_e_html_ga174b50cfb8892143b096a48c3c2f1b80"><div class="ttname"><a href="group___a_u_d_i_o___d_e_v_i_c_e.html#ga174b50cfb8892143b096a48c3c2f1b80">tud_audio_buffer_and_schedule_control_xfer</a></div><div class="ttdeci">bool tud_audio_buffer_and_schedule_control_xfer(uint8_t rhport, tusb_control_request_t const *p_request, void *data, uint16_t len)</div><div class="ttdoc">Buffer control endpoint data and schedule a transmit. </div></div>
<div class="ttc" id="group___a_u_d_i_o___d_e_v_i_c_e_html_ga11bf9129dfada6cf2d4b82b70cee49e1"><div class="ttname"><a href="group___a_u_d_i_o___d_e_v_i_c_e.html#ga11bf9129dfada6cf2d4b82b70cee49e1">audiod_sof_isr</a></div><div class="ttdeci">void audiod_sof_isr(uint8_t rhport, uint32_t frame_count)</div><div class="ttdoc">Process Start of Frame (SOF) interrupt for audio feedback. </div></div>
<div class="ttc" id="group___a_u_d_i_o___d_e_v_i_c_e_html_gae6b28715bb6164b878aa3cc7443f1427"><div class="ttname"><a href="group___a_u_d_i_o___d_e_v_i_c_e.html#gae6b28715bb6164b878aa3cc7443f1427">tud_audio_set_itf_close_EP_cb</a></div><div class="ttdeci">bool tud_audio_set_itf_close_EP_cb(uint8_t rhport, tusb_control_request_t const *p_request)</div><div class="ttdoc">Callback when audio set interface request is received that closes an endpoint. </div></div>
<div class="ttc" id="group___a_u_d_i_o___d_e_v_i_c_e_html_ga6b1f479dddacbab1d2b2c7f050e358d9"><div class="ttname"><a href="group___a_u_d_i_o___d_e_v_i_c_e.html#ga6b1f479dddacbab1d2b2c7f050e358d9">audiod_deinit</a></div><div class="ttdeci">bool audiod_deinit(void)</div><div class="ttdoc">De-initialize the Audio Device driver. </div></div>
<div class="ttc" id="group___a_u_d_i_o___d_e_v_i_c_e_html_gaf00be9e83cf49eccbd81945bf2a5688d"><div class="ttname"><a href="group___a_u_d_i_o___d_e_v_i_c_e.html#gaf00be9e83cf49eccbd81945bf2a5688d">tud_audio_set_req_entity_cb</a></div><div class="ttdeci">bool tud_audio_set_req_entity_cb(uint8_t rhport, tusb_control_request_t const *p_request, uint8_t *pBuff)</div><div class="ttdoc">Callback when audio class specific set request is received for an entity. </div></div>
<div class="ttc" id="group___a_u_d_i_o___d_e_v_i_c_e_html_gafa56d5c9c8813afa52b387dda84f311f"><div class="ttname"><a href="group___a_u_d_i_o___d_e_v_i_c_e.html#gafa56d5c9c8813afa52b387dda84f311f">tud_audio_set_req_itf_cb</a></div><div class="ttdeci">bool tud_audio_set_req_itf_cb(uint8_t rhport, tusb_control_request_t const *p_request, uint8_t *pBuff)</div><div class="ttdoc">Callback when audio class specific set request is received for an interface. </div></div>
<div class="ttc" id="group___a_u_d_i_o___d_e_v_i_c_e_html_gaeaf1722e90fbc7604cc92bdd681410fd"><div class="ttname"><a href="group___a_u_d_i_o___d_e_v_i_c_e.html#gaeaf1722e90fbc7604cc92bdd681410fd">tud_audio_n_mounted</a></div><div class="ttdeci">bool tud_audio_n_mounted(uint8_t func_id)</div><div class="ttdoc">Check if the specified audio function is mounted by the host. </div></div>
<div class="ttc" id="group___a_u_d_i_o___d_e_v_i_c_e_html_gac02b051352214ff36b6071c45a42d2ba"><div class="ttname"><a href="group___a_u_d_i_o___d_e_v_i_c_e.html#gac02b051352214ff36b6071c45a42d2ba">tud_audio_get_req_entity_cb</a></div><div class="ttdeci">bool tud_audio_get_req_entity_cb(uint8_t rhport, tusb_control_request_t const *p_request)</div><div class="ttdoc">Callback when audio class specific get request is received for an entity. </div></div>
<div class="ttc" id="group___a_u_d_i_o___d_e_v_i_c_e_html_ga4fa6dd742c1d1fd387767079876c8f19"><div class="ttname"><a href="group___a_u_d_i_o___d_e_v_i_c_e.html#ga4fa6dd742c1d1fd387767079876c8f19">audiod_init</a></div><div class="ttdeci">void audiod_init(void)</div><div class="ttdoc">Initialize the Audio Device driver. </div></div>
<div class="ttc" id="group___a_u_d_i_o___d_e_v_i_c_e_html_gacb68567b1d7debb5868c26b864b3e2b6"><div class="ttname"><a href="group___a_u_d_i_o___d_e_v_i_c_e.html#gacb68567b1d7debb5868c26b864b3e2b6">tud_audio_set_req_ep_cb</a></div><div class="ttdeci">bool tud_audio_set_req_ep_cb(uint8_t rhport, tusb_control_request_t const *p_request, uint8_t *pBuff)</div><div class="ttdoc">Callback when audio class specific set request is received for an endpoint. </div></div>
<div class="ttc" id="group___a_u_d_i_o___d_e_v_i_c_e_html_ga220604dba0d21db143eb8122dae57e6d"><div class="ttname"><a href="group___a_u_d_i_o___d_e_v_i_c_e.html#ga220604dba0d21db143eb8122dae57e6d">tud_audio_get_req_itf_cb</a></div><div class="ttdeci">bool tud_audio_get_req_itf_cb(uint8_t rhport, tusb_control_request_t const *p_request)</div><div class="ttdoc">Callback when audio class specific get request is received for an interface. </div></div>
<div class="ttc" id="group___a_u_d_i_o___d_e_v_i_c_e_html_ga267968271f1e5533c5a529a4bb452fe9"><div class="ttname"><a href="group___a_u_d_i_o___d_e_v_i_c_e.html#ga267968271f1e5533c5a529a4bb452fe9">audiod_xfer_cb</a></div><div class="ttdeci">bool audiod_xfer_cb(uint8_t rhport, uint8_t edpt_addr, xfer_result_t result, uint32_t xferred_bytes)</div><div class="ttdoc">Callback for handling audio data transfers. </div></div>
<div class="ttc" id="group___a_u_d_i_o___d_e_v_i_c_e_html_gae247fc7bb1effb1be9d40e0a911f1872"><div class="ttname"><a href="group___a_u_d_i_o___d_e_v_i_c_e.html#gae247fc7bb1effb1be9d40e0a911f1872">tud_audio_set_itf_cb</a></div><div class="ttdeci">bool tud_audio_set_itf_cb(uint8_t rhport, tusb_control_request_t const *p_request)</div><div class="ttdoc">Callback when audio set interface request is received. </div></div>
<div class="ttc" id="group___a_u_d_i_o___d_e_v_i_c_e_html_ga94447dfe41f27fdde46871973a236886"><div class="ttname"><a href="group___a_u_d_i_o___d_e_v_i_c_e.html#ga94447dfe41f27fdde46871973a236886">audiod_reset</a></div><div class="ttdeci">void audiod_reset(uint8_t rhport)</div><div class="ttdoc">Reset the Audio Device driver state. </div></div>
<div class="ttc" id="group___a_u_d_i_o___d_e_v_i_c_e_html_ga203ac09097d03c0e5669883120698746"><div class="ttname"><a href="group___a_u_d_i_o___d_e_v_i_c_e.html#ga203ac09097d03c0e5669883120698746">audiod_control_xfer_cb</a></div><div class="ttdeci">bool audiod_control_xfer_cb(uint8_t rhport, uint8_t stage, tusb_control_request_t const *request)</div><div class="ttdoc">Callback for handling control transfers to the Audio Class interface. </div></div>
<div class="ttc" id="group___a_u_d_i_o___d_e_v_i_c_e_html_ga05dc4cf6537e042cceacbc9fddcf5bd4"><div class="ttname"><a href="group___a_u_d_i_o___d_e_v_i_c_e.html#ga05dc4cf6537e042cceacbc9fddcf5bd4">audiod_open</a></div><div class="ttdeci">uint16_t audiod_open(uint8_t rhport, tusb_desc_interface_t const *itf_desc, uint16_t max_len)</div><div class="ttdoc">Initialize an audio function when its interface descriptor is processed. </div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><small>
  <a href="https://www.ti.com/corp/docs/legal/copyright.shtml"> Copyright 1995-2025</a>, Texas Instruments Incorporated. All rights reserved. <br/>
  <a href="https://www.ti.com/corp/docs/legal/trademark/trademrk.htm">Trademarks</a> | <a href="https://www.ti.com/corp/docs/legal/privacy.shtml">Privacy policy</a> | <a href="https://www.ti.com/corp/docs/legal/termsofuse.shtml">Terms of use</a> | <a href="https://www.ti.com/lsds/ti/legal/termsofsale.page">Terms of sale</a>
</small>
</body>
</html>
