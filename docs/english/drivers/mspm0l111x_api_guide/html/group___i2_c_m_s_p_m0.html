<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<title>MSPM0L111X TI-Driver Library: I2C driver APIs</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link id="favicon" rel="shortcut icon" type="image/x-icon" href="favicon.ico"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="tiapistylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table width="100%">
<tr>
  <td bgcolor="black" width="1"><a href="https://www.ti.com"><img border="0" src="tilogo.gif" /></a></td>
  <td bgcolor="red"><img src="titagline.gif" /></td>
</tr>
</table>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">MSPM0L111X TI-Driver Library
   &#160;<span id="projectnumber">2.05.01.00</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle">
<div class="title">I2C driver APIs<div class="ingroups"><a class="el" href="group___i2_c.html">Inter-Integrated Circuit (I2C)</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for I2C driver APIs:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group___i2_c_m_s_p_m0.png" border="0" alt="" usemap="#group______i2__c__m__s__p__m0"/>
<map name="group______i2__c__m__s__p__m0" id="group______i2__c__m__s__p__m0">
<area shape="rect" id="node2" href="group___i2_c.html" title="Inter&#45;Integrated Circuit\l (I2C)" alt="" coords="5,5,176,47"/>
</map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_i2_c_m_s_p_m0___i2_c_pin_cfg.html">I2CMSPM0_I2CPinCfg</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">I2C Pin Configuration.  <a href="struct_i2_c_m_s_p_m0___i2_c_pin_cfg.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_i2_c_m_s_p_m0___h_w_attrs.html">I2CMSPM0_HWAttrs</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">I2C Hardware attributes.  <a href="struct_i2_c_m_s_p_m0___h_w_attrs.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_i2_c_m_s_p_m0___object.html">I2CMSPM0_Object</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">I2C Object.  <a href="struct_i2_c_m_s_p_m0___object.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gaba31176c92feb3a0780547446d9575bd"><td class="memItemLeft" align="right" valign="top"><a id="gaba31176c92feb3a0780547446d9575bd"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i2_c_m_s_p_m0.html#gaba31176c92feb3a0780547446d9575bd">I2C_CONTROLLER_INTERRUPTS_MASK</a>&#160;&#160;&#160;0xFFFF</td></tr>
<tr class="memdesc:gaba31176c92feb3a0780547446d9575bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">I2C controller interrupt mask. <br /></td></tr>
<tr class="separator:gaba31176c92feb3a0780547446d9575bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h1>Overview</h1>
<p>Refer to <a class="el" href="group___i2_c.html#ti_drivers_I2C_Overview">ti_drivers_I2C_Overview</a> for a complete description of APIs and examples of use.</p>
<p>The general I2C API is normally used in application code, e.g. <a class="el" href="group___i2_c.html#ga2db3461e1e956d9b86af414da2fb05f6" title="Open an I2C driver instance. ">I2C_open()</a> is used instead of I2CMSPM0_open(). The board file will define the device specific config, and casting in the general API will ensure that the correct device specific functions are called.</p>
<h2>General Behavior</h2>
<p>Before using the I2C:</p><ul>
<li>The I2C driver is initialized by calling <a class="el" href="group___i2_c.html#ga9ff51ddf1d325776fef90cce0223772b" title="Function to initialize the I2C driver. ">I2C_init()</a>.</li>
<li>The I2C HW is configured and system dependencies are declared (e.g. IOs, power, etc.) by calling <a class="el" href="group___i2_c.html#ga2db3461e1e956d9b86af414da2fb05f6" title="Open an I2C driver instance. ">I2C_open()</a>.</li>
</ul>
<p>The following is true for receive operation:</p><ul>
<li>RX is enabled by calling <a class="el" href="group___i2_c.html#gac5d827b67fe77d7d179026941cc069d7" title="Perform an I2C transaction with an I2C target peripheral. ">I2C_transfer()</a>. The readCount of the <a class="el" href="struct_i2_c___transaction.html" title="Defines a transaction to be used with I2C_transfer() or I2C_transferTimeout(). ">I2C_Transaction</a> must be set to a non-zero value.</li>
<li>If the <a class="el" href="group___i2_c.html#gac5d827b67fe77d7d179026941cc069d7" title="Perform an I2C transaction with an I2C target peripheral. ">I2C_transfer()</a> succeeds, the I2C remains enabled.</li>
<li>The application must check the return value from <a class="el" href="group___i2_c.html#gac5d827b67fe77d7d179026941cc069d7" title="Perform an I2C transaction with an I2C target peripheral. ">I2C_transfer()</a> to verify that the transfer succeeded.</li>
</ul>
<p>The following apply for transmit operation:</p><ul>
<li>TX is enabled by calling <a class="el" href="group___i2_c.html#gac5d827b67fe77d7d179026941cc069d7" title="Perform an I2C transaction with an I2C target peripheral. ">I2C_transfer()</a>. The writeCount of the <a class="el" href="struct_i2_c___transaction.html" title="Defines a transaction to be used with I2C_transfer() or I2C_transferTimeout(). ">I2C_Transaction</a> must be set to a non-zero value.</li>
<li>If the <a class="el" href="group___i2_c.html#gac5d827b67fe77d7d179026941cc069d7" title="Perform an I2C transaction with an I2C target peripheral. ">I2C_transfer()</a> succeeds, the I2C remains enabled.</li>
<li>The application must check the return value from <a class="el" href="group___i2_c.html#gac5d827b67fe77d7d179026941cc069d7" title="Perform an I2C transaction with an I2C target peripheral. ">I2C_transfer()</a> to verify that the transfer succeeded.</li>
</ul>
<p>After I2C operation has ended:</p><ul>
<li>Release system dependencies for I2C by calling <a class="el" href="group___i2_c.html#ga12c86d89a687f2ee1eb980d99c32326d" title="Function to close an I2C driver instance. ">I2C_close()</a>.</li>
</ul>
<h2>Error handling</h2>
<p>If an error occurs during operation:</p><ul>
<li>The I2C Controller transmits a stop bit and remains enabled.</li>
</ul>
<h2>Power Management</h2>
<p>The I2C driver sets a power constraint during transactions to keep the device out of standby; so when all tasks are blocked, the device will enter idle mode instead of standby. When the transactions have finished, the power constraint to prohibit standby is released. The following statements are valid:</p><ul>
<li>After <a class="el" href="group___i2_c.html#ga2db3461e1e956d9b86af414da2fb05f6" title="Open an I2C driver instance. ">I2C_open()</a> call: I2C is enabled, there are no active I2C transactions, the device can enter standby.</li>
<li>After <a class="el" href="group___i2_c.html#gac5d827b67fe77d7d179026941cc069d7" title="Perform an I2C transaction with an I2C target peripheral. ">I2C_transfer()</a> call: active I2C transactions exist, the device might enter idle, but not standby.</li>
<li>When <a class="el" href="group___i2_c.html#gac5d827b67fe77d7d179026941cc069d7" title="Perform an I2C transaction with an I2C target peripheral. ">I2C_transfer()</a> completes, either after success or error, I2C remains enabled, and the device can enter standby.</li>
<li>After <a class="el" href="group___i2_c.html#ga12c86d89a687f2ee1eb980d99c32326d" title="Function to close an I2C driver instance. ">I2C_close()</a> call: I2C is disabled</li>
<li>If the device goes into idle during a transaction, the state of SDA is undefined in the time between the transaction completing and the device waking up. SCL will go low until the device wakes up and starts another transaction or releases the bus. If this is a problem for another device on the I2C bus, you can set a power constraint for PowerMSPM0_DISALLOW_IDLE before the transaction and release it when the transaction completes.</li>
</ul>
<h2>Supported Functions</h2>
<table class="doxtable">
<tr>
<th>Generic API Function </th><th>API Function </th><th>Description  </th></tr>
<tr>
<td><a class="el" href="group___i2_c.html#ga9ff51ddf1d325776fef90cce0223772b" title="Function to initialize the I2C driver. ">I2C_init()</a> </td><td>I2CMSPM0_initHw() </td><td>Initialize I2C driver </td></tr>
<tr>
<td><a class="el" href="group___i2_c.html#ga2db3461e1e956d9b86af414da2fb05f6" title="Open an I2C driver instance. ">I2C_open()</a> </td><td><a class="el" href="group___i2_c.html#ga2db3461e1e956d9b86af414da2fb05f6" title="Open an I2C driver instance. ">I2C_open()</a> </td><td>Initialize I2C HW and set system dependencies </td></tr>
<tr>
<td><a class="el" href="group___i2_c.html#ga12c86d89a687f2ee1eb980d99c32326d" title="Function to close an I2C driver instance. ">I2C_close()</a> </td><td><a class="el" href="group___i2_c.html#ga12c86d89a687f2ee1eb980d99c32326d" title="Function to close an I2C driver instance. ">I2C_close()</a> </td><td>Disable I2C HW and release system dependencies </td></tr>
<tr>
<td><a class="el" href="group___i2_c.html#gac5d827b67fe77d7d179026941cc069d7" title="Perform an I2C transaction with an I2C target peripheral. ">I2C_transfer()</a> </td><td><a class="el" href="group___i2_c_support.html#gaf638babf4e177a40cf4f04324de3c711" title="Function to initialize transfers. ">I2CSupport_primeTransfer()</a></td><td>Start I2C transfer </td></tr>
</table>
<dl class="section note"><dt>Note</dt><dd>All calls should go through the generic API.</dd></dl>
<h2>Supported Bit Rates</h2>
<ul>
<li><a class="el" href="group___i2_c.html#ggac954e3197f04c50293db466c4abb6fbea966fd2df13b3a9825615c50335cf1987">I2C_100kHz</a></li>
<li><a class="el" href="group___i2_c.html#ggac954e3197f04c50293db466c4abb6fbea83cc3750242e6ae9194cd7ed94f764d9">I2C_400kHz</a></li>
<li><a class="el" href="group___i2_c.html#ggac954e3197f04c50293db466c4abb6fbea38a2e32ba65eb0f67b928d181242befa">I2C_1000kHz</a> <h2>Unsupported Functionality</h2>
</li>
</ul>
<p>The I2C driver currently does not support:</p><ul>
<li>Multi-controller mode</li>
<li>I2C target mode</li>
</ul>
<h2>Use Cases<a class="anchor" id="I2C_USE_CASES"></a></h2>
<h3>Basic Receive</h3>
<p>Receive 10 bytes over I2C in <a class="el" href="group___i2_c.html#gga39f3b9340fc4ee241b0d2da9b2841c26abe065350be2a0ae5c9beb24624626c75">I2C_MODE_BLOCKING</a>. </p><div class="fragment"><div class="line"><span class="comment">// Locals</span></div><div class="line"><a class="code" href="struct_i2_c___config__.html">I2C_Handle</a> handle;</div><div class="line"><a class="code" href="struct_i2_c___params.html">I2C_Params</a> params;</div><div class="line"><a class="code" href="struct_i2_c___transaction.html">I2C_Transaction</a> i2cTrans;</div><div class="line">uint8_t rxBuf[32];      <span class="comment">// Receive buffer</span></div><div class="line">uint8_t txBuf[32];      <span class="comment">// Transmit buffer</span></div><div class="line"></div><div class="line"><span class="comment">// Configure I2C parameters.</span></div><div class="line"><a class="code" href="group___i2_c.html#gab11636302074d67180207ab81ceb323c">I2C_Params_init</a>(&amp;params);</div><div class="line"></div><div class="line"><span class="comment">// Initialize I2C transaction structure</span></div><div class="line">i2cTrans.<a class="code" href="struct_i2_c___transaction.html#a08959a9f098163d02d6002e73b3a4606">writeCount</a>    = 0;</div><div class="line">i2cTrans.<a class="code" href="struct_i2_c___transaction.html#aa3490c2af4b443a7a4ec13f57aec6d20">writeBuf</a>      = txBuf;</div><div class="line">i2cTrans.<a class="code" href="struct_i2_c___transaction.html#a2085d4c943f0d8617365b7c427e6a0de">readCount</a>     = 10;</div><div class="line">i2cTrans.<a class="code" href="struct_i2_c___transaction.html#a804b918d5cb08bb75a39866d0b89e01e">readBuf</a>       = rxBuf;</div><div class="line">i2cTrans.<a class="code" href="struct_i2_c___transaction.html#a951cf16485f3cced8dfe0adb387bd118">targetAddress</a> = 0x3C;</div><div class="line"></div><div class="line"><span class="comment">// Open I2C</span></div><div class="line">handle = <a class="code" href="group___i2_c.html#ga2db3461e1e956d9b86af414da2fb05f6">I2C_open</a>(CONFIG_I2C, &amp;params);</div><div class="line"></div><div class="line"><span class="comment">// Do I2C transfer receive</span></div><div class="line"><a class="code" href="group___i2_c.html#gac5d827b67fe77d7d179026941cc069d7">I2C_transfer</a>(handle, &amp;i2cTrans);</div></div><!-- fragment --><h3>Basic Transmit</h3>
<p>Transmit 16 bytes over I2C in <a class="el" href="group___i2_c.html#gga39f3b9340fc4ee241b0d2da9b2841c26a129731a7edeb285f43a54b2cf9f5ac72">I2C_MODE_CALLBACK</a>. </p><div class="fragment"><div class="line">uint8_t rxBuffer[32];            <span class="comment">// Receive buffer</span></div><div class="line">uint8_t txBuffer[32];            <span class="comment">// Transmit buffer</span></div><div class="line"><span class="keywordtype">bool</span> transferDone = <span class="keyword">false</span>;</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> transferCallback(<a class="code" href="struct_i2_c___config__.html">I2C_Handle</a> handle, <a class="code" href="struct_i2_c___transaction.html">I2C_Transaction</a> *transac, <span class="keywordtype">bool</span> result)</div><div class="line">{</div><div class="line">    <span class="comment">// Set length bytes</span></div><div class="line">    <span class="keywordflow">if</span> (result) {</div><div class="line">        transferDone = <span class="keyword">true</span>;</div><div class="line">    } <span class="keywordflow">else</span> {</div><div class="line">        <span class="comment">// Transaction failed, act accordingly...</span></div><div class="line">        .</div><div class="line">        .</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> taskFxn(uintptr_t a0, uintptr_t a1)</div><div class="line">{</div><div class="line">    <span class="comment">// Locals</span></div><div class="line">    <a class="code" href="struct_i2_c___config__.html">I2C_Handle</a> handle;</div><div class="line">    <a class="code" href="struct_i2_c___params.html">I2C_Params</a> params;</div><div class="line">    <a class="code" href="struct_i2_c___transaction.html">I2C_Transaction</a> i2cTrans;</div><div class="line"></div><div class="line">    <span class="comment">// Configure I2C parameters.</span></div><div class="line">    <a class="code" href="group___i2_c.html#gab11636302074d67180207ab81ceb323c">I2C_Params_init</a>(&amp;params);</div><div class="line">    params.<a class="code" href="struct_i2_c___params.html#a79c5c51380ffbdb21df1dff6cb57de0e">transferMode</a> = <a class="code" href="group___i2_c.html#gga39f3b9340fc4ee241b0d2da9b2841c26a129731a7edeb285f43a54b2cf9f5ac72">I2C_MODE_CALLBACK</a>;</div><div class="line">    params.<a class="code" href="struct_i2_c___params.html#a57edf1b900368904779d0c57a73cf047">transferCallbackFxn</a> = transferCallback;</div><div class="line"></div><div class="line">    <span class="comment">// Prepare data to send, send 0x00, 0x01, 0x02, ...0xFF, 0x00, 0x01...</span></div><div class="line">    <span class="keywordflow">for</span>(uint32_t i = 0; i &lt; numTxBytes; i++)</div><div class="line">        txBuffer[i] = (uint8_t) i;</div><div class="line"></div><div class="line">    <span class="comment">// Initialize I2C transaction structure</span></div><div class="line">    i2cTrans.<a class="code" href="struct_i2_c___transaction.html#a08959a9f098163d02d6002e73b3a4606">writeCount</a>    = 16;</div><div class="line">    i2cTrans.<a class="code" href="struct_i2_c___transaction.html#aa3490c2af4b443a7a4ec13f57aec6d20">writeBuf</a>      = txBuffer;</div><div class="line">    i2cTrans.<a class="code" href="struct_i2_c___transaction.html#a2085d4c943f0d8617365b7c427e6a0de">readCount</a>     = 0;</div><div class="line">    i2cTrans.<a class="code" href="struct_i2_c___transaction.html#a804b918d5cb08bb75a39866d0b89e01e">readBuf</a>       = rxBuffer;</div><div class="line">    i2cTrans.<a class="code" href="struct_i2_c___transaction.html#a951cf16485f3cced8dfe0adb387bd118">targetAddress</a> = 0x3C;</div><div class="line"></div><div class="line">    <span class="comment">// Open I2C</span></div><div class="line">    handle = <a class="code" href="group___i2_c.html#ga2db3461e1e956d9b86af414da2fb05f6">I2C_open</a>(CONFIG_I2C, &amp;params);</div><div class="line"></div><div class="line">    <span class="comment">// Do I2C transfer (in callback mode)</span></div><div class="line">    <a class="code" href="group___i2_c.html#gac5d827b67fe77d7d179026941cc069d7">I2C_transfer</a>(handle, &amp;i2cTrans);</div><div class="line"></div><div class="line">    <span class="comment">// Do other stuff while I2C is handling the transfer.</span></div><div class="line">    .</div><div class="line">    .</div><div class="line"></div><div class="line">    <span class="comment">// Do something if I2C transfer is finished.</span></div><div class="line">    <span class="keywordflow">if</span>(transferDone) {</div><div class="line">        .</div><div class="line">        .</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Continue...</span></div><div class="line">    .</div><div class="line">    .</div><div class="line">}</div></div><!-- fragment --><h3>Chained Transactions</h3>
<p>Transmit 10 bytes and then 32 bytes over I2C in <a class="el" href="group___i2_c.html#gga39f3b9340fc4ee241b0d2da9b2841c26a129731a7edeb285f43a54b2cf9f5ac72">I2C_MODE_CALLBACK</a>. </p><div class="fragment"><div class="line">uint8_t rxBuffer[32];            <span class="comment">// Receive buffer</span></div><div class="line">uint8_t txBuffer[32];            <span class="comment">// Transmit buffer</span></div><div class="line">uint8_t rxBuffer2[64];           <span class="comment">// Receive buffer 2</span></div><div class="line">uint8_t txBuffer2[64];           <span class="comment">// Transmit buffer 2</span></div><div class="line"><span class="keywordtype">bool</span> transferDone = <span class="keyword">false</span>;</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> writeCallbackDefault(<a class="code" href="struct_i2_c___config__.html">I2C_Handle</a> handle, <a class="code" href="struct_i2_c___transaction.html">I2C_Transaction</a> *transac, <span class="keywordtype">bool</span> result)</div><div class="line">{</div><div class="line">    <span class="comment">// Set length bytes</span></div><div class="line">    <span class="keywordflow">if</span> (result) {</div><div class="line">        transferDone = <span class="keyword">true</span>;</div><div class="line">    } <span class="keywordflow">else</span> {</div><div class="line">        <span class="comment">// Transaction failed, act accordingly...</span></div><div class="line">        .</div><div class="line">        .</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> taskFxn(uintptr_t a0, uintptr_t a1)</div><div class="line">{</div><div class="line">    <span class="comment">// Locals</span></div><div class="line">    <a class="code" href="struct_i2_c___config__.html">I2C_Handle</a> handle;</div><div class="line">    <a class="code" href="struct_i2_c___params.html">I2C_Params</a> params;</div><div class="line">    <a class="code" href="struct_i2_c___transaction.html">I2C_Transaction</a> i2cTrans;</div><div class="line">    <a class="code" href="struct_i2_c___transaction.html">I2C_Transaction</a> i2cTrans2;</div><div class="line"></div><div class="line">    <span class="comment">// Configure I2C parameters.</span></div><div class="line">    <a class="code" href="group___i2_c.html#gab11636302074d67180207ab81ceb323c">I2C_Params_init</a>(&amp;params);</div><div class="line">    params.<a class="code" href="struct_i2_c___params.html#a79c5c51380ffbdb21df1dff6cb57de0e">transferMode</a> = <a class="code" href="group___i2_c.html#gga39f3b9340fc4ee241b0d2da9b2841c26a129731a7edeb285f43a54b2cf9f5ac72">I2C_MODE_CALLBACK</a>;</div><div class="line">    params.<a class="code" href="struct_i2_c___params.html#a57edf1b900368904779d0c57a73cf047">transferCallbackFxn</a> = writeCallbackDefault;</div><div class="line"></div><div class="line">    <span class="comment">// Prepare data to send, send 0x00, 0x01, 0x02, ...0xFF, 0x00, 0x01...</span></div><div class="line">    <span class="keywordflow">for</span>(uint32_t i = 0; i &lt; numTxBytes; i++)</div><div class="line">        txBuffer[i] = (uint8_t) i;</div><div class="line"></div><div class="line">    <span class="comment">// Initialize first I2C transaction structure</span></div><div class="line">    i2cTrans.<a class="code" href="struct_i2_c___transaction.html#a08959a9f098163d02d6002e73b3a4606">writeCount</a>    = 10;</div><div class="line">    i2cTrans.<a class="code" href="struct_i2_c___transaction.html#aa3490c2af4b443a7a4ec13f57aec6d20">writeBuf</a>      = txBuffer;</div><div class="line">    i2cTrans.<a class="code" href="struct_i2_c___transaction.html#a2085d4c943f0d8617365b7c427e6a0de">readCount</a>     = 0;</div><div class="line">    i2cTrans.<a class="code" href="struct_i2_c___transaction.html#a804b918d5cb08bb75a39866d0b89e01e">readBuf</a>       = rxBuffer;</div><div class="line">    i2cTrans.<a class="code" href="struct_i2_c___transaction.html#a951cf16485f3cced8dfe0adb387bd118">targetAddress</a> = 0x3C;</div><div class="line"></div><div class="line">    <span class="comment">// Second transaction</span></div><div class="line">    i2cTrans2.<a class="code" href="struct_i2_c___transaction.html#a08959a9f098163d02d6002e73b3a4606">writeCount</a>    = 32;</div><div class="line">    i2cTrans2.<a class="code" href="struct_i2_c___transaction.html#aa3490c2af4b443a7a4ec13f57aec6d20">writeBuf</a>      = txBuffer2;</div><div class="line">    i2cTrans2.<a class="code" href="struct_i2_c___transaction.html#a2085d4c943f0d8617365b7c427e6a0de">readCount</a>     = 0;</div><div class="line">    i2cTrans2.<a class="code" href="struct_i2_c___transaction.html#a804b918d5cb08bb75a39866d0b89e01e">readBuf</a>       = rxBuffer2;</div><div class="line">    i2cTrans2.<a class="code" href="struct_i2_c___transaction.html#a951cf16485f3cced8dfe0adb387bd118">targetAddress</a> = 0x2E;</div><div class="line"></div><div class="line">    <span class="comment">// Open I2C</span></div><div class="line">    handle = <a class="code" href="group___i2_c.html#ga2db3461e1e956d9b86af414da2fb05f6">I2C_open</a>(CONFIG_I2C, &amp;params);</div><div class="line"></div><div class="line">    <span class="comment">// Do chained I2C transfers (in callback mode).</span></div><div class="line">    <a class="code" href="group___i2_c.html#gac5d827b67fe77d7d179026941cc069d7">I2C_transfer</a>(handle, &amp;i2cTrans);</div><div class="line">    <a class="code" href="group___i2_c.html#gac5d827b67fe77d7d179026941cc069d7">I2C_transfer</a>(handle, &amp;i2cTrans2);</div><div class="line"></div><div class="line">    <span class="comment">// Do other stuff while I2C is handling the transfers.</span></div><div class="line">    .</div><div class="line">    .</div><div class="line"></div><div class="line">    <span class="comment">// Do something if I2C transfers are finished.</span></div><div class="line">    <span class="keywordflow">if</span>(transferDone) {</div><div class="line">        .</div><div class="line">        .</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Continue...</span></div><div class="line">    .</div><div class="line">    .</div><div class="line">}</div></div><!-- fragment --><h1>Instrumentation</h1>
<p>The I2C driver interface produces log statements if instrumentation is enabled.</p>
<table class="doxtable">
<tr>
<th>Diagnostics Mask </th><th>Log details  </th></tr>
<tr>
<td>Diags_USER1 </td><td>basic I2C operations performed </td></tr>
<tr>
<td>Diags_USER2 </td><td>detailed I2C operations performed </td></tr>
</table>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><small>
  <a href="https://www.ti.com/corp/docs/legal/copyright.shtml">© Copyright 1995-2025</a>, Texas Instruments Incorporated. All rights reserved. <br/>
  <a href="https://www.ti.com/corp/docs/legal/trademark/trademrk.htm">Trademarks</a> | <a href="https://www.ti.com/corp/docs/legal/privacy.shtml">Privacy policy</a> | <a href="https://www.ti.com/corp/docs/legal/termsofuse.shtml">Terms of use</a> | <a href="https://www.ti.com/lsds/ti/legal/termsofsale.page">Terms of sale</a>
</small>
</body>
</html>
